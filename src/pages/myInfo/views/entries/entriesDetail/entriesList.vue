<template>	<div class="main">		<div v-wechat-title="$route.meta.title"></div>		<div v-if="isNo" class="recode-wrap" v-for="(item,index) in workInfo" :key="index">			<div class="content"  @click="goDetail('/entries/entriesDetail?activityEndTime='+item.activityMatch.activityEndTime+'&activityId='+item.activityId+'&kindergartenId='+$route.query.kindergartenId+'&rank='+item.rank+'&activityImgUrl='+item.activityImgUrl+'&childName='+item.baseMemberInfo.nickName+'&createTime='+item.createTime+'&activityVideoUrl='+item.activityVideoUrl+'&workTotalScore='+item.workTotalScore+'&workOnlineScore='+item.workOnlineScore+'&workUnderlineScore='+item.workUnderlineScore+'&teachCommentTitle='+item.teachCommentTitle)">				<div class="img">					<div class="img-wrap">						<img  @click.stop="showBigImg(item.activityImgUrl)" :src="item.activityImgUrl" alt="">					</div>				</div>				<div class="payInfo">					<div class="payTitle">{{item.baseMemberInfo.nickName}}</div>					<div class="payClassHour"></div>					<div>{{item.createTime}}</div>				</div>			</div>		</div>		<div v-if="isViewVideo" :class="{watchVideo:isViewVideo}" @click="hide()">			<video  controls="controls">				<source :src="videoUrl" type="video/mp4" />			</video>		</div>        <div v-if="isView" :class="{viewImg:isView}" @click="hide()">            <img :src="imgUrl" alt="">        </div>		<div class="noData" v-if="isNo1&&sortList.length==0">			<img src="../../img/no.png" alt="">			<div class="tip">暂无参赛数据</div>		</div>		<div class="back" >			<button @click="goBack()">返回</button>		</div>	</div></template><script>	import request from '../../../../../static/js/request'	import result from '../../../../../static/js/result';	export default {		data() {			return {				workInfo:[],				videoUrl:'',				imgUrl:'',				workTotalScore: 0,				workOnlineScore: 0,				workUnderlineScore: 0,				activityEndTime:this.$route.query.activityEndTime?this.$route.query.activityEndTime:'',				sortList:[],				rank:0,				isViewVideo:false,                isView:false,				isNo : false,				isNo1:false			}		},		mounted() {		},		created() {			//this.search();			this.getList();		},		methods: {			goBack(){				this.$router.go(-1)			},			async getList(){				let params = {					//activityId:this.$route.query.id,					access_token:this.$store.state.token				};				console.log(params);				let listInfo = await request('/api/token/activity/member/list',						'post', params,'application/x-www-form-urlencoded');				// loading.hide()				let res = result(listInfo);				// loading.hide()				if(!res) return;				console.log(res);				for(let item of res){					if(item.baseMemberInfo.phone==this.$store.state.phone){						if(item.activityId == this.$route.query.activityId){							if(item.baseMemberInfo.kindergartenId==this.$route.query.kindergartenId){								console.log('进来了',item.baseMemberInfo.phone)								console.log(item.activityVideoUrl)								item.rank = 0;								this.workInfo.push(item);								this.imgUrl = item.activityImgUrl;								this.videoUrl = item.activityVideoUrl;								this.workOnlineScore = item.workOnlineScore;								this.workTotalScore = Number((item.workUnderlineScore*0.8)+(item.workOnlineScore*0.2)).toFixed(2)//item.workTotalScore;								this.workUnderlineScore = item.workUnderlineScore;							}						}					}				}				let resArr = [];				for(let item of res){					if(item.activityId == this.$route.query.activityId){						if(item.baseMemberInfo.kindergartenId==this.$route.query.kindergartenId){							item.workTotalScore = Number(item.workUnderlineScore*0.8+item.workOnlineScore*0.2).toFixed(2)							resArr.push(item)							this.sortList = resArr.sort(this.sort('workTotalScore'))							console.log(this.sortList)							for(let i=0;i<this.sortList.length;i++){								if(this.sortList[i].baseMemberInfo.phone==this.$store.state.phone){									for(let j=0;j<this.workInfo.length;j++){										if(this.sortList[i].workTotalScore==this.workInfo[j].workTotalScore){											this.workInfo[j].rank=i+1										}									}									this.rank = i+1								}							}						}					}				}				console.log(this.workInfo)				if(this.workInfo.length==0){					this.isNo = false;					this.isNo1 = true;				}else {					this.isNo = true;					this.isNo1 = false;				}				console.log('排行数组',this.sortList)				console.log('当前排名',this.rank)				//this.endTime = res.activityMatch.activityEndTime			},			search(){				weui.searchBar('#searchBar');			},			goDetail(url){				this.$router.push(url);			},			sort(property){//数组排序				return function(a,b){					var value1 = a[property];					var value2 = b[property];					return value2 - value1;				}			},			showVideo(video){				this.videoUrl = video;				this.isViewVideo = true;			},            showBigImg(img){				this.imgUrl = img                this.isView = true;            },			hide(){			    this.isView = false				this.isViewVideo = false;			},		},		computed:{		}	}</script><style lang="less" scoped>	@import "~static/css/minxin.less";	.main {		width: 100%;		height: 100%;        box-sizing: border-box;		position: relative;        overflow-y: scroll;        padding: 20rem / @rootFontSize;		top: 0;		left: 0;		input::-webkit-input-placeholder {			color: #999;		}		.content{			margin-top:  30rem / @rootFontSize;			margin-bottom: 30rem / @rootFontSize;			padding: 30rem / @rootFontSize;			display: flex;			justify-content: space-between;			box-shadow: 0 0 16rem/ @rootFontSize #bababa;			border-radius: 8px;			.img{				width: 100rem / @rootFontSize;				height: 100%;				.img-wrap{					width: 100%;					height: 100rem / @rootFontSize;					img{						border-radius: 50%;						width: 100%;						height: 100%;					}				}			}			.payInfo{				width: 60%;				/*display: flex;				justify-content: space-between;				flex-direction: column;*/				.payTitle{					//line-height: 36rem / @rootFontSize;					margin-bottom: 30rem / @rootFontSize;					display:-webkit-box;					-webkit-box-orient:vertical;					-webkit-line-clamp:2;					overflow:hidden;				}				.payClassHour{					margin-bottom: 25rem / @rootFontSize;					color: #959595;				}				.payTime{					color: #959595;				}			}			.payPrice{				width: 20%;				span{					color: #ff842c;					margin-top:30rem / @rootFontSize;					display: block;				}				.payed{					color: slateblue;				}			}		}		.wrap{			.cha{				display: flex;				justify-content: space-between;				height: 80rem / @rootFontSize;				align-items: center;				div{					display: flex;					justify-content: space-between;					align-items: center;					input{						margin-left: 10rem / @rootFontSize;					}				}			}		}		.typeTitle{			margin-top: 20rem / @rootFontSize;			margin-bottom: 20rem / @rootFontSize;			img{				width: 30rem / @rootFontSize;				height: 40rem / @rootFontSize;			}			span{				.font-dpr(14px);				font-weight: bold;				margin-left: 10rem / @rootFontSize;			}		}		.product-wrap{			padding: 10rem / @rootFontSize;			box-sizing: border-box;			display: flex;			flex-wrap: wrap;			justify-content: space-between;			/* .one{                 height: 183px!important;             }*/			/*.left{                width: 48%;            }            .right{                width: 48%;            }*/			.product-item{				/*box-shadow: 0 0 16rem/ @rootFontSize #bababa;				border-radius: 8px;*/				width: 100%;				height: auto;				padding-bottom: 5px;				margin-bottom: 30rem / @rootFontSize;				.img{					padding: 30rem / @rootFontSize 0;				}				.score{					padding:0 0 30rem / @rootFontSize 0;                    display: flex;justify-content: space-between;                    align-items: center;					.scoreTitle{						display: flex;						align-items: center;						color: #ff842c;					}				}				.score1{					color: #ff842c;				}				.rankNow{					padding: 30rem / @rootFontSize 0;					display: flex;					justify-content: flex-end;				}				.productImg{                    display: flex;                    justify-content: space-between;                    align-items: center;					width: 100%;					margin-bottom: 5px;                    .imgWrap{                        width: 200rem  / @rootFontSize ;                        height: 200rem  / @rootFontSize ;                        img{                            border-radius:8px 8px 0 0 ;                            width: 100%;                            height: 100%;                        }                    }					video{						width: 100%;						//height: 500rem / @rootFontSize;					}                    span{                        width: 40%;                        color: #959595;                        .font-dpr(14px);                    }				}				.productTitle{					margin-left: 10rem / @rootFontSize!important;					line-height: 14px;					margin-bottom: 5px;					display:-webkit-box;					-webkit-box-orient:vertical;					-webkit-line-clamp:2;					overflow:hidden;				}				.productPrice{					color: #ff842c;				}				.num{					width: 100%;					display: flex;					justify-content: flex-end;					span{						color: #ff842c;					}				}			}		}		.rank{			width: 100%;			.rankTitle{				padding: 30rem / @rootFontSize 0;				width: 100%;                span{                    .font-dpr(14px)                }			}			.rankWrap{				color: #ff842c;				.rankNum{					display: flex;					justify-content: center;					margin-bottom: 30rem / @rootFontSize;				}				.workScore{					display: flex;					justify-content: flex-end;				}				.workName{					display: flex;					justify-content: flex-end;					padding: 30rem / @rootFontSize 0;				}				video{					width: 100%;				}			}		}		.watchVideo{			z-index: 999;			width: 100%;			height: 100%;			position: fixed;			left: 0;			top: 0;			background: #000;			display: flex;			justify-content: center;			align-items: center;			video{				width: 100%;				height: 50%;			}		}        .viewImg{            z-index: 999;            width: 100%;            height: 100%;            position: fixed;            left: 0;            top: 0;            background: #000;            display: flex;            justify-content: center;            align-items: center;            img{                width: 100%;                height: 50%;            }        }		.contentWrap{            display: flex;            justify-content: space-between;            align-items: center;			.content1{                width: 80%;                margin-top: 20rem / @rootFontSize;				margin-bottom: 20rem / @rootFontSize;				padding: 30rem / @rootFontSize;				display: flex;				justify-content: space-between;				box-shadow: 0 0 16rem/ @rootFontSize #bababa;				border-radius: 8px;				.img{					width: 100rem / @rootFontSize;					height: 100%;					.img-wrap{						width: 100%;						height: 100rem / @rootFontSize;						img{							border-radius: 50%;							width: 100%;							height: 100%;						}					}				}				.payInfo{					width: 45%;					.payTitle{						line-height: 36rem / @rootFontSize;						margin-bottom: 30rem / @rootFontSize;						display:-webkit-box;						-webkit-box-orient:vertical;						-webkit-line-clamp:2;						overflow:hidden;					}					.payClassHour{						margin-bottom: 25rem / @rootFontSize;						color: #959595;					}					.payTime{						color: #959595;					}				}				.payPrice{					width: 20%;					span{						color: #ff842c;						margin-top:30rem / @rootFontSize;						display: block;					}					.payed{						color: slateblue;					}				}			}		}		.rankTitle{			display: flex;			justify-content: center;			align-items: center;			height: 100rem / @rootFontSize;			background: #ff842c;			span{				color: #fff;			}		}		.noData{			width: 100%;			height: 100%;			position: relative;			img{				width: 100%;				height: 100%;			}			.tip{				color: #999;				.font-dpr(18px);				position: absolute;				left:50%;				top:80%;				transform: translate(-50%, -50%);			}		}		.back{			z-index: 80;			position: fixed;			left: 0;			bottom: 40rem / @rootFontSize;			text-align: center;			width: 100%;			height: 80rem / @rootFontSize;			button{				margin-top: 10rem / @rootFontSize;				margin-bottom:  10rem / @rootFontSize;				width: 80%;				height: 80rem / @rootFontSize;				border-radius: 30px;				border: none;				background: #ff842c;				//background: skyblue;				color: #fff;				box-sizing: border-box;				text-align: center;				line-height: 50%;				.font-dpr(16px);			}		}	}</style>